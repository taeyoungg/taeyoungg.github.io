---
title:  "DB Index 정리"
excerpt: "효과적인 DB Index 사용법"

categories:
  - DB
tags:
  - DB
  - Index
date: 2021-04-06
---
<br>

DB를 사용하다보면 무수히 많은 데이터가 쌓이는데,<br>
그 데이터들 중 특정 데이터를 조회해야 하는 상황을 생각해보자.<br>

무작정 전체 데이터를 일일이 검색한다면 시간이 오래 걸릴 것이다.<br>

그러나 검색 대상을 간추릴 수 있다면 어떨까?<br>
전체 데이터를 조회하는 것 보다 속도가 훨씬 빨라 질 것이다.<br>

이를 가능하게 하는것이 바로 `인덱스(Index)` 이다.

## 인덱스란?
인덱스는 특정 데이터를 쉽게 찾기 위해 일정한 순서대로 정렬한 색인을 의미한다.<br>

사전을 살펴보면 한글은 ㄱ,ㄴ,ㄷ 순서로, 영어는 a,b,c 순서대로 정렬되어 있는것을 볼 수 있다.
DB 역시 이와 같은 원리로 인덱스가 지정된 컬럼들을 순서대로 정렬시키고 메모리에 저장하여 활용한다.<br>

그럼 모든 컬럼을 전부 인덱스로 잡아 사용하면 DB 성능이 좋아지지 않을까?<br>

데이터의 읽기 속도는 빨라질 수 있어도, 데이터의 쓰기 속도는 오히려 하락하며 메모리 측면에서도 좋지않다.<br>

따라서 필요한 컬럼에 대해서만 인덱스를 설정해야 DB의 성능을 효과적으로 향상시킬 수 있다.<br>
<br>

## 효과적인 인덱스 설정 방법
DB의 성능을 향상시키기 위해서는 인덱스를 통해 검색에 필요한 범위를 최대한 감소시키는 것이 중요하다.
즉 최대한 간소화된 범위내에서 검색하도록 하는것이다.<br>

#### **카디널리티(Cardinality)**

<br>
카디널리티는 데이터 값의 고유한 정도를 나타낸다.<br>
카디널리티가 낮을수록 중복이 많고, 카디널리티가 높을수록 중복이 낮다.<br><br>

다음과 같이 직원의 정보를 저장하는 테이블이 있다고 하자.<br>
<br>

|사원번호|부서|직급|
|----|----|----|
|001|개발1팀|수석|
|002|개발1팀|전임|
|003|개발1팀|사원|
|004|개발2팀|책임|
|005|개발2팀|전임|
|006|개발2팀|사원|

<br>
여기서 부서와 직급 컬럼은 중복된 값을 갖는 경우가 존재한다.<br>
그러나 사원번호는 각 row마다 고유한 값을 갖는다.<br>

따라서 이런 경우에는 사원번호 컬럼의 카디널리티가 가장 높다고 할 수 있다.<br>
<br>


#### **선택도(Selectivity)**

<br>
선택도는 특정 데이터를 골라낼 수 있는 정도이다.
<br>

> Selectivity = Cardinality / 전체 레코드 수

선택도가 1이면 해당 컬럼에 대하여 모든 레코드가 유니크하다는 의미이다.<br>
<br>

따라서 카디널리티가 높은(선택도가 높은) 컬럼을 인덱스로 설정하면 
그만큼 더 많은 데이터를 거를 수 있기 때문에 효과적이라고 할 수 있다.

